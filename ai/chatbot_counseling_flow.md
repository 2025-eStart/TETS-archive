## 🦊 챗봇 상담 흐름 시나리오 (전체 단계)

---

### 🔹 단계 0. 챗봇 호출 전 진입 화면

- **기본 진입 화면**: “나만의 우주” 키우기 화면 (경험치 및 우주 요소 시각화)
- **알림 배너**: “지금 회고 시작하면 보너스 보상 지급!”

---

### 🔹 단계 1. 챗봇 대화 시작

- **챗봇 인삿말** (여우 톤):
  ```
  안녕? 오늘 하루는 어땠어?
  우리 혹시 오늘 소비한 기록을 같이 살펴볼까?
  ```
- **챗봇**: 소비내역 불러오기 (Firebase or Notification 연동)
- **챗봇**: “이 중에 ㅇㅇ 소비, 충동 소비 같기도 한데 어떻게 생각해?” → ✅ *예/아니요/잘 모르겠어요* 버튼 제공\
  → **예** 선택한 소비만 다음 단계로 진행\
  → 행동 기록: `JUDGE_BASIC`, 3건 이상 시 `JUDGE_COMBO`

---

### 🔹 단계 2. 충동 소비 원인 탐색

- **챗봇**:

  ```
  그 소비는 왜 하게 된 걸까? 아래 중에 가까운 이유가 있을까?
  ```

- **사용자 선택지**:

  - 스트레스/기분전환이 필요했어
  - 할인 알림/광고에 끌렸어
  - 지루해서 습관처럼 샀어
  - 그냥 이유 없이 그 순간 갖고 싶었어
  - 기타

- **GPT + 논문 RAG 기반 응답 생성**: → 선택한 이유에 따른 공감 + 근거 기반 조언 제공\
  → 예: “마케팅 알림에 자극받는 건 자연스러운 일이야. 이런 상황에서 이런 방법은 어때?”

---

### 🔹 단계 3. RST-PQ 기반 대체 행동 추천

- **기초 테스트 결과 기반 유형 추출(GDP/RI/RR/IMP)**
- **챗봇**:
  ```
  너는 [RI 타입]이라 자극을 찾는 경향이 있어.
  대신 아래 같은 행동으로 그 욕구를 채워보는 건 어때?
  ```
- **대체 행동 리스트 (풀에서 3\~5개 랜덤)**:
  - 예: [RI 타입] → “위시리스트 저장하기”, “짧은 유튜브 영상 보기” 등
- **사용자 선택 → ****\`\`**** 기록**
- **대체 행동 미션 생성**: 실행했는지 다음 날 피드백 요청 예정

---

### 🔹 단계 4. 대체 행동 피드백

- 다음날 알림 or 챗봇 시작 시 유도:
  ```
  어제 해보기로 한 [대체 행동] 해봤어?
  ```
- **예 / 아니오 / 일부만 했어** → 행동 기록
  - 3일 연속 시: `ACT_STREAK3`
  - 7일 연속 시: `ACT_STREAK7`

---

### 🔹 단계 5. 상담 마무리 및 레포트 생성

- **챗봇**:
  ```
  오늘 너의 소비를 함께 돌아봤어. 우주의 에너지가 너에게 흘러들어왔지!
  ```
- **레포트 제공**:
  - 오늘 소비 점수
  - 오늘의 충동 소비 내역 요약
  - 대체 행동 미션 상태
  - 피드백 링크 제공

---

### 🔹 단계 6. 우주 보상 지급

- **상담/판단/실천 여부에 따라 보상 지급 (json 기반)**:
  - 예: 상담 시 `랜덤 행성`, 실천 시 `특수 위성`, streak 시 `항성`, `유니크 행성`
  - 행동 기록은 Firebase DB에 기록하여 누적 관리
- **시각화 UI**: 새로운 보상 도달 시 시각 효과 → 유저 몰입도 향상
- **NPC 텅장왕자 등장 (간헐적)**:
  ```
  오! 네가 또 대체 행동을 실천했구나. 성운 하나 생겼어!
  ```

---

### ✅ 추가 UX 요소

| 기능                  | 설명                                                      |
| ------------------- | ------------------------------------------------------- |
| 🔔 **10분 내 재접속 보상** | 푸시 유도 + 보상 강화                                           |
| 🪐 **우주 시각화**       | 획득한 행성계/항성계/성단 시각적으로 표현                                 |
| 🎖 **업적 시스템**       | `ACT_STREAK3` = “습관의 씨앗”, `ACT_STREAK7` = “자기 조절의 달인” 등 |

